#!/bin/zsh

function os() {
  unameOut="$(uname -s)"
  case "${unameOut}" in
    Linux*)     machine=Linux;;
    Darwin*)    machine=Mac;;
    CYGWIN*)    machine=Cygwin;;
    MINGW*)     machine=MinGw;;
    MSYS_NT*)   machine=MSys;;
    *)          machine=Other;;
  esac
  echo ${machine}
}

function killport() {
  lsof -i TCP:$1 | grep LISTEN | awk '{print $2}' | xargs kill -9
}

function os_appearance() {
  os=$(os)
  if (test $os = "Mac"); then
    macos_appearance;
  elif (test $os = "Linux"); then
    linux_appearance;
  else
    echo "dark"
  fi
}

function linux_appearance() {
  if [[ "$(gsettings get org.cinnamon.theme name)" =~ "[Dd]ark" ]]; then
    echo "dark";
  else
    echo "light";
  fi
}

function macos_appearance() {
  if (test "$(defaults read -g AppleInterfaceStyle 2>&1)" = "Dark"); then
    echo "dark";
  else 
    echo "light";
  fi
}
